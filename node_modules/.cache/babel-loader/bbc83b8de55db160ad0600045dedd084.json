{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Desktop/index-ui-master/src/views/Farm/components/Stake/GmiFarm.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Button, Card, CardActions, CardContent, Spacer } from 'react-neu';\nimport styled from 'styled-components';\nimport indexToken from 'assets/index-token.png';\nimport Split from 'components/Split';\nimport { GmiIndex } from 'constants/productTokens';\nimport useBalances from 'hooks/useBalances';\nimport useGmiFarming from 'hooks/useGmiFarming';\nimport usePrices from 'hooks/usePrices';\nimport useWallet from 'hooks/useWallet';\nimport { displayFromWei, fromWei } from 'utils';\nimport GmiStakeModal from './components/GmiStakeModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Stake = () => {\n  _s();\n\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false);\n  const {\n    stakedGmiBalance: stakedBalance,\n    unharvestedIndexFromGmiBalance\n  } = useBalances();\n  const {\n    status\n  } = useWallet();\n  const {\n    isApproved,\n    isApproving,\n    onApprove,\n    onStake,\n    onUnstakeAndHarvest\n  } = useGmiFarming();\n  const {\n    gmiRewardsApy\n  } = usePrices();\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false);\n  }, [setStakeModalIsOpen]);\n  const handleOnStake = useCallback(amount => {\n    onStake(amount);\n    handleDismissStakeModal();\n  }, [handleDismissStakeModal, onStake]);\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true);\n  }, [setStakeModalIsOpen]);\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Stake\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (!isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: isApproving,\n        full: true,\n        onClick: onApprove,\n        text: !isApproving ? 'Approve staking' : 'Approving staking...',\n        variant: isApproving || status !== 'connected' ? 'secondary' : 'default'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        full: true,\n        onClick: handleStakeClick,\n        text: \"Stake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 14\n      }, this);\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove]);\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0);\n\n    if (status !== 'connected' || !hasStaked) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Unstake & Claim\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Button, {\n      full: true,\n      onClick: onUnstakeAndHarvest,\n      text: \"Unstake & Claim\",\n      variant: \"secondary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this);\n  }, [stakedBalance, status, onUnstakeAndHarvest]);\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return displayFromWei(stakedBalance, 5);\n    } else {\n      return '--';\n    }\n  }, [stakedBalance]);\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedIndexFromGmiBalance) {\n      return displayFromWei(unharvestedIndexFromGmiBalance, 5);\n    } else {\n      return '--';\n    }\n  }, [unharvestedIndexFromGmiBalance]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        \"data-cy\": \"expired-farm-widget\",\n        children: [/*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(StyledCardTitleWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(StyledHeaderIcon, {\n              alt: \"GMI icon\",\n              src: GmiIndex.image\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 106,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n              size: \"md\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(StyledLmTitle, {\n              children: [/*#__PURE__*/_jsxDEV(StyledCardTitle, {\n                children: \"GMI Staking\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n                size: \"sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(StyledCardSubtitle, {\n                children: \"Active Jan. 10th, 2022 - Mar. 10th, 2022\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StyledFarmTokensAndApyWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Split, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedStakedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                    alt: \"gmi icon\",\n                    src: GmiIndex.image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 123,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 121,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Staked GMI Tokens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [gmiRewardsApy, \"% APR\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"(Volatile)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 130,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedEarnedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                    src: indexToken,\n                    alt: \"Index token\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Unclaimed INDEX in pool\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: [StakeButton, UnstakeButton]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(GmiStakeModal, {\n      isOpen: stakeModalIsOpen,\n      onDismiss: handleDismissStakeModal,\n      onStake: handleOnStake\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Stake, \"iCAE7u3O8u+GfDrUU6+C/gNItbM=\", false, function () {\n  return [useBalances, useWallet, useGmiFarming, usePrices];\n});\n\n_c = Stake;\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`;\n_c2 = StyledHeaderIcon;\nconst StyledTokenIcon = styled.img`\n  height: 20px;\n  margin-left: 10px;\n`;\n_c3 = StyledTokenIcon;\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`;\n_c4 = StyledCardTitle;\nconst StyledCardSubtitle = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`;\n_c5 = StyledCardSubtitle;\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c6 = StyledCardTitleWrapper;\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c7 = StyledLmTitle;\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n_c8 = StyledFarmTokensAndApyWrapper;\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c9 = StyledFarmText;\nconst StyledSectionLabel = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-size: 16px;\n`;\n_c10 = StyledSectionLabel;\nexport default Stake;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"Stake\");\n$RefreshReg$(_c2, \"StyledHeaderIcon\");\n$RefreshReg$(_c3, \"StyledTokenIcon\");\n$RefreshReg$(_c4, \"StyledCardTitle\");\n$RefreshReg$(_c5, \"StyledCardSubtitle\");\n$RefreshReg$(_c6, \"StyledCardTitleWrapper\");\n$RefreshReg$(_c7, \"StyledLmTitle\");\n$RefreshReg$(_c8, \"StyledFarmTokensAndApyWrapper\");\n$RefreshReg$(_c9, \"StyledFarmText\");\n$RefreshReg$(_c10, \"StyledSectionLabel\");","map":{"version":3,"sources":["/Users/safahi/Desktop/index-ui-master/src/views/Farm/components/Stake/GmiFarm.tsx"],"names":["React","useCallback","useMemo","useState","Button","Card","CardActions","CardContent","Spacer","styled","indexToken","Split","GmiIndex","useBalances","useGmiFarming","usePrices","useWallet","displayFromWei","fromWei","GmiStakeModal","Stake","stakeModalIsOpen","setStakeModalIsOpen","stakedGmiBalance","stakedBalance","unharvestedIndexFromGmiBalance","status","isApproved","isApproving","onApprove","onStake","onUnstakeAndHarvest","gmiRewardsApy","handleDismissStakeModal","handleOnStake","amount","handleStakeClick","StakeButton","UnstakeButton","hasStaked","gt","formattedStakedBalance","formattedEarnedBalance","image","StyledHeaderIcon","img","StyledTokenIcon","StyledCardTitle","span","StyledCardSubtitle","props","theme","colors","grey","StyledCardTitleWrapper","div","StyledLmTitle","StyledFarmTokensAndApyWrapper","StyledFarmText","StyledSectionLabel"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react'\n\nimport { Button, Card, CardActions, CardContent, Spacer } from 'react-neu'\n\nimport numeral from 'numeral'\nimport styled from 'styled-components'\n\nimport indexToken from 'assets/index-token.png'\nimport Split from 'components/Split'\nimport { GmiIndex } from 'constants/productTokens'\nimport useBalances from 'hooks/useBalances'\nimport useGmiFarming from 'hooks/useGmiFarming'\nimport usePrices from 'hooks/usePrices'\nimport useWallet from 'hooks/useWallet'\nimport { displayFromWei, fromWei } from 'utils'\n\nimport GmiStakeModal from './components/GmiStakeModal'\n\nconst Stake: React.FC = () => {\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false)\n\n  const { stakedGmiBalance: stakedBalance, unharvestedIndexFromGmiBalance } =\n    useBalances()\n  const { status } = useWallet()\n  const { isApproved, isApproving, onApprove, onStake, onUnstakeAndHarvest } =\n    useGmiFarming()\n  const { gmiRewardsApy } = usePrices()\n\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false)\n  }, [setStakeModalIsOpen])\n\n  const handleOnStake = useCallback(\n    (amount: string) => {\n      onStake(amount)\n      handleDismissStakeModal()\n    },\n    [handleDismissStakeModal, onStake]\n  )\n\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true)\n  }, [setStakeModalIsOpen])\n\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return <Button disabled full text='Stake' variant='secondary' />\n    }\n\n    if (!isApproved) {\n      return (\n        <Button\n          disabled={isApproving}\n          full\n          onClick={onApprove}\n          text={!isApproving ? 'Approve staking' : 'Approving staking...'}\n          variant={\n            isApproving || status !== 'connected' ? 'secondary' : 'default'\n          }\n        />\n      )\n    }\n\n    if (isApproved) {\n      return <Button full onClick={handleStakeClick} text='Stake' />\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove])\n\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0)\n    if (status !== 'connected' || !hasStaked) {\n      return <Button disabled full text='Unstake & Claim' variant='secondary' />\n    }\n    return (\n      <Button\n        full\n        onClick={onUnstakeAndHarvest}\n        text='Unstake & Claim'\n        variant='secondary'\n      />\n    )\n  }, [stakedBalance, status, onUnstakeAndHarvest])\n\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return displayFromWei(stakedBalance, 5)\n    } else {\n      return '--'\n    }\n  }, [stakedBalance])\n\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedIndexFromGmiBalance) {\n      return displayFromWei(unharvestedIndexFromGmiBalance, 5)\n    } else {\n      return '--'\n    }\n  }, [unharvestedIndexFromGmiBalance])\n\n  return (\n    <>\n      <Card>\n        <div data-cy='expired-farm-widget'>\n          <CardContent>\n            <StyledCardTitleWrapper>\n              <StyledHeaderIcon alt='GMI icon' src={GmiIndex.image} />\n              <Spacer size='md' />\n              <StyledLmTitle>\n                <StyledCardTitle>GMI Staking</StyledCardTitle>\n                <Spacer size='sm' />\n                <StyledCardSubtitle>\n                  Active Jan. 10th, 2022 - Mar. 10th, 2022\n                </StyledCardSubtitle>\n              </StyledLmTitle>\n            </StyledCardTitleWrapper>\n            <Spacer />\n\n            <StyledFarmTokensAndApyWrapper>\n              <Split>\n                <div>\n                  <StyledFarmText>\n                    {formattedStakedBalance}\n                    <StyledTokenIcon alt='gmi icon' src={GmiIndex.image} />\n                  </StyledFarmText>\n                  <StyledSectionLabel>Staked GMI Tokens</StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>{gmiRewardsApy}% APR</StyledFarmText>\n                  <StyledSectionLabel>(Volatile)</StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>\n                    {formattedEarnedBalance}\n                    <StyledTokenIcon src={indexToken} alt='Index token' />\n                  </StyledFarmText>\n                  <StyledSectionLabel>\n                    Unclaimed INDEX in pool\n                  </StyledSectionLabel>\n                </div>\n              </Split>\n            </StyledFarmTokensAndApyWrapper>\n          </CardContent>\n          <CardActions>\n            {StakeButton}\n            {UnstakeButton}\n          </CardActions>\n        </div>\n      </Card>\n      <GmiStakeModal\n        isOpen={stakeModalIsOpen}\n        onDismiss={handleDismissStakeModal}\n        onStake={handleOnStake}\n      />\n    </>\n  )\n}\n\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`\n\nconst StyledTokenIcon = styled.img`\n  height: 20px;\n  margin-left: 10px;\n`\n\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`\n\nconst StyledCardSubtitle = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`\n\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledSectionLabel = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-size: 16px;\n`\n\nexport default Stake\n"]},"metadata":{},"sourceType":"module"}