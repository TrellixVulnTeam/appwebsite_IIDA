{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Documents/GitHub/appwebsite/src/contexts/GmiFarming/Provider.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport ConfirmTransactionModal, { TransactionStatusType } from 'components/ConfirmTransactionModal';\nimport { gmiStakingRewardsAddress, gmiTokenAddress } from 'constants/ethContractAddresses';\nimport useApproval from 'hooks/useApproval';\nimport useTransactionWatcher from 'hooks/useTransactionWatcher';\nimport useWallet from 'hooks/useWallet';\nimport { claimEarnedIndexReward, farmEndTime, stakeGmiTokens, unstakeAndClaimEarnedIndexReward, unstakeGmiTokens } from 'index-sdk/gmiStaking';\nimport BigNumber from 'utils/bignumber';\nimport { waitTransaction } from 'utils/index';\nimport Context from './Context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Provider = ({\n  children\n}) => {\n  _s();\n\n  const [confirmTxModalIsOpen, setConfirmTxModalIsOpen] = useState(false);\n  const {\n    transactionId,\n    transactionStatus,\n    onSetTransactionStatus,\n    onSetTransactionId\n  } = useTransactionWatcher();\n  const {\n    account,\n    ethereum\n  } = useWallet();\n  const {\n    isApproved,\n    isApproving,\n    onApprove\n  } = useApproval(gmiTokenAddress, gmiStakingRewardsAddress, () => setConfirmTxModalIsOpen(false));\n  const handleApprove = useCallback(() => {\n    setConfirmTxModalIsOpen(true);\n    onApprove();\n  }, [onApprove, setConfirmTxModalIsOpen]);\n  const handleStake = useCallback(async amount => {\n    if (!ethereum || !account || !amount || new BigNumber(amount).lte(0)) return;\n    setConfirmTxModalIsOpen(true);\n    onSetTransactionStatus(TransactionStatusType.IS_APPROVING);\n    const bigStakeQuantity = new BigNumber(amount).multipliedBy(new BigNumber(10).pow(18));\n    const transactionId = await stakeGmiTokens(ethereum, account, bigStakeQuantity);\n\n    if (!transactionId) {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n      return;\n    }\n\n    onSetTransactionId(transactionId);\n    onSetTransactionStatus(TransactionStatusType.IS_PENDING);\n    const success = await waitTransaction(ethereum, transactionId);\n\n    if (success) {\n      onSetTransactionStatus(TransactionStatusType.IS_COMPLETED);\n    } else {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n    }\n  }, [ethereum, account, setConfirmTxModalIsOpen, onSetTransactionId, onSetTransactionStatus]);\n  const handleUnstake = useCallback(async amount => {\n    if (!ethereum || !account || !amount || new BigNumber(amount).lte(0)) return;\n    setConfirmTxModalIsOpen(true);\n    onSetTransactionStatus(TransactionStatusType.IS_APPROVING);\n    const bigStakeQuantity = new BigNumber(amount).multipliedBy(new BigNumber(10).pow(18));\n    const transactionId = await unstakeGmiTokens(ethereum, account, bigStakeQuantity);\n\n    if (!transactionId) {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n      return;\n    }\n\n    onSetTransactionId(transactionId);\n    onSetTransactionStatus(TransactionStatusType.IS_PENDING);\n    const success = await waitTransaction(ethereum, transactionId);\n\n    if (success) {\n      onSetTransactionStatus(TransactionStatusType.IS_COMPLETED);\n    } else {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n    }\n  }, [ethereum, account, setConfirmTxModalIsOpen, onSetTransactionId, onSetTransactionStatus]);\n  const handleHarvest = useCallback(async () => {\n    if (!ethereum || !account) return;\n    setConfirmTxModalIsOpen(true);\n    onSetTransactionStatus(TransactionStatusType.IS_APPROVING);\n    const transactionId = await claimEarnedIndexReward(ethereum, account);\n\n    if (!transactionId) {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n      return;\n    }\n\n    onSetTransactionId(transactionId);\n    onSetTransactionStatus(TransactionStatusType.IS_PENDING);\n    const success = await waitTransaction(ethereum, transactionId);\n\n    if (success) {\n      onSetTransactionStatus(TransactionStatusType.IS_COMPLETED);\n    } else {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n    }\n  }, [ethereum, account, setConfirmTxModalIsOpen, onSetTransactionId, onSetTransactionStatus]);\n  const handleUnstakeAndHarvest = useCallback(async () => {\n    if (!ethereum || !account) return;\n    setConfirmTxModalIsOpen(true);\n    onSetTransactionStatus(TransactionStatusType.IS_APPROVING);\n    const transactionId = await unstakeAndClaimEarnedIndexReward(ethereum, account);\n\n    if (!transactionId) {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n      return;\n    }\n\n    onSetTransactionId(transactionId);\n    onSetTransactionStatus(TransactionStatusType.IS_PENDING);\n    const success = await waitTransaction(ethereum, transactionId);\n\n    if (success) {\n      onSetTransactionStatus(TransactionStatusType.IS_COMPLETED);\n    } else {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED);\n    }\n  }, [ethereum, account, setConfirmTxModalIsOpen, onSetTransactionId, onSetTransactionStatus]);\n  const currentTime = Date.now();\n  const isPoolActive = new BigNumber(farmEndTime).isGreaterThan(new BigNumber(currentTime));\n  return /*#__PURE__*/_jsxDEV(Context.Provider, {\n    value: {\n      isApproved,\n      isApproving,\n      isPoolActive,\n      onApprove: handleApprove,\n      onHarvest: handleHarvest,\n      onUnstakeAndHarvest: handleUnstakeAndHarvest,\n      onStake: handleStake,\n      onUnstake: handleUnstake\n    },\n    children: [children, /*#__PURE__*/_jsxDEV(ConfirmTransactionModal, {\n      isOpen: confirmTxModalIsOpen,\n      transactionId: transactionId,\n      transactionMiningStatus: transactionStatus,\n      onDismiss: () => {\n        setConfirmTxModalIsOpen(false);\n        onSetTransactionStatus(undefined);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 207,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Provider, \"dC3XZ6yiJtpIqD+0suqskgK3Mho=\", false, function () {\n  return [useTransactionWatcher, useWallet, useApproval];\n});\n\n_c = Provider;\nexport default Provider;\n\nvar _c;\n\n$RefreshReg$(_c, \"Provider\");","map":{"version":3,"sources":["/Users/safahi/Documents/GitHub/appwebsite/src/contexts/GmiFarming/Provider.tsx"],"names":["React","useCallback","useState","ConfirmTransactionModal","TransactionStatusType","gmiStakingRewardsAddress","gmiTokenAddress","useApproval","useTransactionWatcher","useWallet","claimEarnedIndexReward","farmEndTime","stakeGmiTokens","unstakeAndClaimEarnedIndexReward","unstakeGmiTokens","BigNumber","waitTransaction","Context","Provider","children","confirmTxModalIsOpen","setConfirmTxModalIsOpen","transactionId","transactionStatus","onSetTransactionStatus","onSetTransactionId","account","ethereum","isApproved","isApproving","onApprove","handleApprove","handleStake","amount","lte","IS_APPROVING","bigStakeQuantity","multipliedBy","pow","IS_FAILED","IS_PENDING","success","IS_COMPLETED","handleUnstake","handleHarvest","handleUnstakeAndHarvest","currentTime","Date","now","isPoolActive","isGreaterThan","onHarvest","onUnstakeAndHarvest","onStake","onUnstake","undefined"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\n\nimport { provider } from 'web3-core'\n\nimport ConfirmTransactionModal, {\n  TransactionStatusType,\n} from 'components/ConfirmTransactionModal'\nimport {\n  gmiStakingRewardsAddress,\n  gmiTokenAddress,\n} from 'constants/ethContractAddresses'\nimport useApproval from 'hooks/useApproval'\nimport useTransactionWatcher from 'hooks/useTransactionWatcher'\nimport useWallet from 'hooks/useWallet'\nimport {\n  claimEarnedIndexReward,\n  farmEndTime,\n  stakeGmiTokens,\n  unstakeAndClaimEarnedIndexReward,\n  unstakeGmiTokens,\n} from 'index-sdk/gmiStaking'\nimport BigNumber from 'utils/bignumber'\nimport { waitTransaction } from 'utils/index'\n\nimport Context from './Context'\n\nconst Provider: React.FC = ({ children }) => {\n  const [confirmTxModalIsOpen, setConfirmTxModalIsOpen] = useState(false)\n\n  const {\n    transactionId,\n    transactionStatus,\n    onSetTransactionStatus,\n    onSetTransactionId,\n  } = useTransactionWatcher()\n  const { account, ethereum } = useWallet()\n\n  const { isApproved, isApproving, onApprove } = useApproval(\n    gmiTokenAddress,\n    gmiStakingRewardsAddress,\n    () => setConfirmTxModalIsOpen(false)\n  )\n\n  const handleApprove = useCallback(() => {\n    setConfirmTxModalIsOpen(true)\n    onApprove()\n  }, [onApprove, setConfirmTxModalIsOpen])\n\n  const handleStake = useCallback(\n    async (amount: string) => {\n      if (!ethereum || !account || !amount || new BigNumber(amount).lte(0))\n        return\n\n      setConfirmTxModalIsOpen(true)\n      onSetTransactionStatus(TransactionStatusType.IS_APPROVING)\n\n      const bigStakeQuantity = new BigNumber(amount).multipliedBy(\n        new BigNumber(10).pow(18)\n      )\n      const transactionId = await stakeGmiTokens(\n        ethereum as provider,\n        account,\n        bigStakeQuantity\n      )\n\n      if (!transactionId) {\n        onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n        return\n      }\n\n      onSetTransactionId(transactionId)\n      onSetTransactionStatus(TransactionStatusType.IS_PENDING)\n\n      const success = await waitTransaction(ethereum as provider, transactionId)\n\n      if (success) {\n        onSetTransactionStatus(TransactionStatusType.IS_COMPLETED)\n      } else {\n        onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n      }\n    },\n    [\n      ethereum,\n      account,\n      setConfirmTxModalIsOpen,\n      onSetTransactionId,\n      onSetTransactionStatus,\n    ]\n  )\n\n  const handleUnstake = useCallback(\n    async (amount: string) => {\n      if (!ethereum || !account || !amount || new BigNumber(amount).lte(0))\n        return\n\n      setConfirmTxModalIsOpen(true)\n      onSetTransactionStatus(TransactionStatusType.IS_APPROVING)\n\n      const bigStakeQuantity = new BigNumber(amount).multipliedBy(\n        new BigNumber(10).pow(18)\n      )\n      const transactionId = await unstakeGmiTokens(\n        ethereum as provider,\n        account,\n        bigStakeQuantity\n      )\n\n      if (!transactionId) {\n        onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n        return\n      }\n\n      onSetTransactionId(transactionId)\n      onSetTransactionStatus(TransactionStatusType.IS_PENDING)\n\n      const success = await waitTransaction(ethereum as provider, transactionId)\n\n      if (success) {\n        onSetTransactionStatus(TransactionStatusType.IS_COMPLETED)\n      } else {\n        onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n      }\n    },\n    [\n      ethereum,\n      account,\n      setConfirmTxModalIsOpen,\n      onSetTransactionId,\n      onSetTransactionStatus,\n    ]\n  )\n\n  const handleHarvest = useCallback(async () => {\n    if (!ethereum || !account) return\n\n    setConfirmTxModalIsOpen(true)\n    onSetTransactionStatus(TransactionStatusType.IS_APPROVING)\n\n    const transactionId = await claimEarnedIndexReward(\n      ethereum as provider,\n      account\n    )\n\n    if (!transactionId) {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n      return\n    }\n\n    onSetTransactionId(transactionId)\n    onSetTransactionStatus(TransactionStatusType.IS_PENDING)\n\n    const success = await waitTransaction(ethereum as provider, transactionId)\n\n    if (success) {\n      onSetTransactionStatus(TransactionStatusType.IS_COMPLETED)\n    } else {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n    }\n  }, [\n    ethereum,\n    account,\n    setConfirmTxModalIsOpen,\n    onSetTransactionId,\n    onSetTransactionStatus,\n  ])\n\n  const handleUnstakeAndHarvest = useCallback(async () => {\n    if (!ethereum || !account) return\n\n    setConfirmTxModalIsOpen(true)\n    onSetTransactionStatus(TransactionStatusType.IS_APPROVING)\n\n    const transactionId = await unstakeAndClaimEarnedIndexReward(\n      ethereum as provider,\n      account\n    )\n\n    if (!transactionId) {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n      return\n    }\n\n    onSetTransactionId(transactionId)\n    onSetTransactionStatus(TransactionStatusType.IS_PENDING)\n\n    const success = await waitTransaction(ethereum as provider, transactionId)\n\n    if (success) {\n      onSetTransactionStatus(TransactionStatusType.IS_COMPLETED)\n    } else {\n      onSetTransactionStatus(TransactionStatusType.IS_FAILED)\n    }\n  }, [\n    ethereum,\n    account,\n    setConfirmTxModalIsOpen,\n    onSetTransactionId,\n    onSetTransactionStatus,\n  ])\n\n  const currentTime = Date.now()\n  const isPoolActive = new BigNumber(farmEndTime).isGreaterThan(\n    new BigNumber(currentTime)\n  )\n\n  return (\n    <Context.Provider\n      value={{\n        isApproved,\n        isApproving,\n        isPoolActive,\n        onApprove: handleApprove,\n        onHarvest: handleHarvest,\n        onUnstakeAndHarvest: handleUnstakeAndHarvest,\n        onStake: handleStake,\n        onUnstake: handleUnstake,\n      }}\n    >\n      {children}\n      <ConfirmTransactionModal\n        isOpen={confirmTxModalIsOpen}\n        transactionId={transactionId}\n        transactionMiningStatus={transactionStatus}\n        onDismiss={() => {\n          setConfirmTxModalIsOpen(false)\n          onSetTransactionStatus(undefined)\n        }}\n      />\n    </Context.Provider>\n  )\n}\n\nexport default Provider\n"]},"metadata":{},"sourceType":"module"}