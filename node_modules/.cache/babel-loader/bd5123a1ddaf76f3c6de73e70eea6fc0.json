{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Documents/GitHub/appwebsite/src/views/Farm/components/Stake/DpiFarm.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Button, Card, CardContent, Spacer } from 'react-neu';\nimport numeral from 'numeral';\nimport styled from 'styled-components';\nimport indexToken from 'assets/index-token.png';\nimport Split from 'components/Split';\nimport useBalances from 'hooks/useBalances';\nimport useFarmingTwo from 'hooks/useFarmingTwo';\nimport useMediaQuery from 'hooks/useMediaQuery';\nimport usePrices from 'hooks/usePrices';\nimport useWallet from 'hooks/useWallet';\nimport { fromWei } from 'utils';\nimport DpiStakeModal from './components/DpiStakeModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Stake = () => {\n  _s();\n\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false);\n  const {\n    stakedFarmTwoBalance: stakedBalance,\n    unharvestedFarmTwoBalance\n  } = useBalances();\n  const {\n    status\n  } = useWallet();\n  const {\n    isApproved,\n    isApproving,\n    onApprove,\n    onStake,\n    onUnstakeAndHarvest,\n    onHarvest\n  } = useFarmingTwo();\n  const {\n    farmTwoApy\n  } = usePrices();\n  const {\n    isMobile\n  } = useMediaQuery();\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false);\n  }, [setStakeModalIsOpen]);\n  const handleOnStake = useCallback(amount => {\n    onStake(amount);\n    handleDismissStakeModal();\n  }, [handleDismissStakeModal, onStake]);\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true);\n  }, [setStakeModalIsOpen]);\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Stake\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (!isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: isApproving,\n        full: true,\n        onClick: onApprove,\n        text: !isApproving ? 'Approve staking' : 'Approving staking...',\n        variant: isApproving || status !== 'connected' ? 'secondary' : 'default'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        full: true,\n        onClick: handleStakeClick,\n        text: \"Stake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 14\n      }, this);\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove]);\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0);\n\n    if (status !== 'connected' || !hasStaked) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Unstake & Claim\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Button, {\n      full: true,\n      onClick: onUnstakeAndHarvest,\n      text: \"Unstake & Claim\",\n      variant: \"secondary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 7\n    }, this);\n  }, [stakedBalance, status, onUnstakeAndHarvest]);\n  const ClaimButton = useMemo(() => {\n    if (status !== 'connected') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Claim\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Button, {\n      full: true,\n      onClick: onHarvest,\n      text: \"Claim\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 12\n    }, this);\n  }, [status, onHarvest]);\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return numeral(stakedBalance.toString()).format('0.00000a');\n    } else {\n      return '--';\n    }\n  }, [stakedBalance]);\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedFarmTwoBalance) {\n      return numeral(unharvestedFarmTwoBalance.toString()).format('0.00000a');\n    } else {\n      return '--';\n    }\n  }, [unharvestedFarmTwoBalance]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        \"data-cy\": \"dpi-farm-widget\",\n        children: [/*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(StyledCardTitleWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(StyledHeaderIcon, {\n              src: \"https://index-dao.s3.amazonaws.com/defi_pulse_index_set.svg\",\n              alt: \"DefiPulse Index Logo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n              size: \"md\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(StyledLmTitle, {\n              children: [/*#__PURE__*/_jsxDEV(StyledCardTitle, {\n                children: \"DPI Liquidity Program\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n                size: \"sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(StyledCardSubtitle, {\n                children: \"Active July 13th, 2021 - August 12th, 2021\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 133,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StyledFarmTokensAndApyWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Split, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedStakedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                    alt: \"eth dpi icon\",\n                    src: \"https://index-dao.s3.amazonaws.com/eth-dpi.svg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 140,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Staked ETH/DPI Uniswap LP Tokens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [farmTwoApy, \"% APR\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 151,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"(Volatile)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedEarnedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                    src: indexToken,\n                    alt: \"Index token\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 158,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Unclaimed INDEX in pool\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StyledCardActions, {\n          isMobile: isMobile,\n          children: [ClaimButton, /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this), UnstakeButton]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DpiStakeModal, {\n      isOpen: stakeModalIsOpen,\n      onDismiss: handleDismissStakeModal,\n      onStake: handleOnStake\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Stake, \"GIKJuA7iNgmOzdZzekLE/qIEVVM=\", false, function () {\n  return [useBalances, useWallet, useFarmingTwo, usePrices, useMediaQuery];\n});\n\n_c = Stake;\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`;\n_c2 = StyledHeaderIcon;\nconst StyledTokenIcon = styled.img`\n  height: 20px;\n  margin-left: 10px;\n`;\n_c3 = StyledTokenIcon;\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`;\n_c4 = StyledCardTitle;\nconst StyledCardSubtitle = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`;\n_c5 = StyledCardSubtitle;\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c6 = StyledCardTitleWrapper;\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c7 = StyledLmTitle;\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n_c8 = StyledFarmTokensAndApyWrapper;\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c9 = StyledFarmText;\nconst StyledSectionLabel = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-size: 16px;\n`;\n_c10 = StyledSectionLabel;\nconst StyledCardActions = styled.div`\n  display: flex;\n  flex-wrap: ${props => props.isMobile ? 'wrap' : 'no-wrap'};\n  padding: 30px;\n  padding-top: 0px;\n`;\n_c11 = StyledCardActions;\nexport default Stake;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11;\n\n$RefreshReg$(_c, \"Stake\");\n$RefreshReg$(_c2, \"StyledHeaderIcon\");\n$RefreshReg$(_c3, \"StyledTokenIcon\");\n$RefreshReg$(_c4, \"StyledCardTitle\");\n$RefreshReg$(_c5, \"StyledCardSubtitle\");\n$RefreshReg$(_c6, \"StyledCardTitleWrapper\");\n$RefreshReg$(_c7, \"StyledLmTitle\");\n$RefreshReg$(_c8, \"StyledFarmTokensAndApyWrapper\");\n$RefreshReg$(_c9, \"StyledFarmText\");\n$RefreshReg$(_c10, \"StyledSectionLabel\");\n$RefreshReg$(_c11, \"StyledCardActions\");","map":{"version":3,"sources":["/Users/safahi/Documents/GitHub/appwebsite/src/views/Farm/components/Stake/DpiFarm.tsx"],"names":["React","useCallback","useMemo","useState","Button","Card","CardContent","Spacer","numeral","styled","indexToken","Split","useBalances","useFarmingTwo","useMediaQuery","usePrices","useWallet","fromWei","DpiStakeModal","Stake","stakeModalIsOpen","setStakeModalIsOpen","stakedFarmTwoBalance","stakedBalance","unharvestedFarmTwoBalance","status","isApproved","isApproving","onApprove","onStake","onUnstakeAndHarvest","onHarvest","farmTwoApy","isMobile","handleDismissStakeModal","handleOnStake","amount","handleStakeClick","StakeButton","UnstakeButton","hasStaked","gt","ClaimButton","formattedStakedBalance","toString","format","formattedEarnedBalance","StyledHeaderIcon","img","StyledTokenIcon","StyledCardTitle","span","StyledCardSubtitle","props","theme","colors","grey","StyledCardTitleWrapper","div","StyledLmTitle","StyledFarmTokensAndApyWrapper","StyledFarmText","StyledSectionLabel","StyledCardActions"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react'\n\nimport { Button, Card, CardContent, Spacer } from 'react-neu'\n\nimport numeral from 'numeral'\nimport styled from 'styled-components'\n\nimport indexToken from 'assets/index-token.png'\nimport Split from 'components/Split'\nimport useBalances from 'hooks/useBalances'\nimport useFarmingTwo from 'hooks/useFarmingTwo'\nimport useMediaQuery from 'hooks/useMediaQuery'\nimport usePrices from 'hooks/usePrices'\nimport useWallet from 'hooks/useWallet'\nimport { fromWei } from 'utils'\n\nimport DpiStakeModal from './components/DpiStakeModal'\n\nconst Stake: React.FC = () => {\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false)\n\n  const { stakedFarmTwoBalance: stakedBalance, unharvestedFarmTwoBalance } =\n    useBalances()\n  const { status } = useWallet()\n  const {\n    isApproved,\n    isApproving,\n    onApprove,\n    onStake,\n    onUnstakeAndHarvest,\n    onHarvest,\n  } = useFarmingTwo()\n  const { farmTwoApy } = usePrices()\n  const { isMobile } = useMediaQuery()\n\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false)\n  }, [setStakeModalIsOpen])\n\n  const handleOnStake = useCallback(\n    (amount: string) => {\n      onStake(amount)\n      handleDismissStakeModal()\n    },\n    [handleDismissStakeModal, onStake]\n  )\n\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true)\n  }, [setStakeModalIsOpen])\n\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return <Button disabled full text='Stake' variant='secondary' />\n    }\n    if (!isApproved) {\n      return (\n        <Button\n          disabled={isApproving}\n          full\n          onClick={onApprove}\n          text={!isApproving ? 'Approve staking' : 'Approving staking...'}\n          variant={\n            isApproving || status !== 'connected' ? 'secondary' : 'default'\n          }\n        />\n      )\n    }\n\n    if (isApproved) {\n      return <Button full onClick={handleStakeClick} text='Stake' />\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove])\n\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0)\n    if (status !== 'connected' || !hasStaked) {\n      return <Button disabled full text='Unstake & Claim' variant='secondary' />\n    }\n\n    return (\n      <Button\n        full\n        onClick={onUnstakeAndHarvest}\n        text='Unstake & Claim'\n        variant='secondary'\n      />\n    )\n  }, [stakedBalance, status, onUnstakeAndHarvest])\n\n  const ClaimButton = useMemo(() => {\n    if (status !== 'connected') {\n      return <Button disabled full text='Claim' variant='secondary' />\n    }\n    return <Button full onClick={onHarvest} text='Claim' />\n  }, [status, onHarvest])\n\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return numeral(stakedBalance.toString()).format('0.00000a')\n    } else {\n      return '--'\n    }\n  }, [stakedBalance])\n\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedFarmTwoBalance) {\n      return numeral(unharvestedFarmTwoBalance.toString()).format('0.00000a')\n    } else {\n      return '--'\n    }\n  }, [unharvestedFarmTwoBalance])\n\n  return (\n    <>\n      <Card>\n        <div data-cy='dpi-farm-widget'>\n          <CardContent>\n            <StyledCardTitleWrapper>\n              <StyledHeaderIcon\n                src='https://index-dao.s3.amazonaws.com/defi_pulse_index_set.svg'\n                alt='DefiPulse Index Logo'\n              />\n              <Spacer size='md' />\n              <StyledLmTitle>\n                <StyledCardTitle>DPI Liquidity Program</StyledCardTitle>\n                <Spacer size='sm' />\n                <StyledCardSubtitle>\n                  Active July 13th, 2021 - August 12th, 2021\n                </StyledCardSubtitle>\n              </StyledLmTitle>\n            </StyledCardTitleWrapper>\n            <Spacer />\n\n            <StyledFarmTokensAndApyWrapper>\n              <Split>\n                <div>\n                  <StyledFarmText>\n                    {formattedStakedBalance}\n                    <StyledTokenIcon\n                      alt='eth dpi icon'\n                      src='https://index-dao.s3.amazonaws.com/eth-dpi.svg'\n                    />\n                  </StyledFarmText>\n                  <StyledSectionLabel>\n                    Staked ETH/DPI Uniswap LP Tokens\n                  </StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>{farmTwoApy}% APR</StyledFarmText>\n                  <StyledSectionLabel>(Volatile)</StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>\n                    {formattedEarnedBalance}\n                    <StyledTokenIcon src={indexToken} alt='Index token' />\n                  </StyledFarmText>\n                  <StyledSectionLabel>\n                    Unclaimed INDEX in pool\n                  </StyledSectionLabel>\n                </div>\n              </Split>\n            </StyledFarmTokensAndApyWrapper>\n          </CardContent>\n          <StyledCardActions isMobile={isMobile}>\n            {ClaimButton}\n            <Spacer />\n            {UnstakeButton}\n          </StyledCardActions>\n        </div>\n      </Card>\n      <DpiStakeModal\n        isOpen={stakeModalIsOpen}\n        onDismiss={handleDismissStakeModal}\n        onStake={handleOnStake}\n      />\n    </>\n  )\n}\n\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`\n\nconst StyledTokenIcon = styled.img`\n  height: 20px;\n  margin-left: 10px;\n`\n\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`\n\nconst StyledCardSubtitle = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`\n\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledSectionLabel = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-size: 16px;\n`\n\ninterface StyledCardActionProps {\n  isMobile: boolean\n}\n\nconst StyledCardActions = styled.div<StyledCardActionProps>`\n  display: flex;\n  flex-wrap: ${(props) => (props.isMobile ? 'wrap' : 'no-wrap')};\n  padding: 30px;\n  padding-top: 0px;\n`\n\nexport default Stake\n"]},"metadata":{},"sourceType":"module"}