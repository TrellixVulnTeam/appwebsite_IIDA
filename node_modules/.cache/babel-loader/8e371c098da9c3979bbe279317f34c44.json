{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Desktop/index-ui-master/src/views/Farm/components/Stake/LegacyFarm.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Button, Card, CardActions, CardContent, Spacer } from 'react-neu';\nimport numeral from 'numeral';\nimport styled from 'styled-components';\nimport indexToken from 'assets/index-token.png';\nimport Split from 'components/Split';\nimport useBalances from 'hooks/useBalances';\nimport useFarming from 'hooks/useFarming';\nimport usePrices from 'hooks/usePrices';\nimport useWallet from 'hooks/useWallet';\nimport { fromWei } from 'utils';\nimport DpiStakeModal from './components/DpiStakeModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Stake = () => {\n  _s();\n\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false);\n  const {\n    stakedUniswapEthDpiLpBalance: stakedBalance,\n    unharvestedIndexBalance\n  } = useBalances();\n  const {\n    status\n  } = useWallet();\n  const {\n    isApproved,\n    isApproving,\n    onApprove,\n    onStake,\n    onUnstakeAndHarvest\n  } = useFarming();\n  const {\n    apy\n  } = usePrices();\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false);\n  }, [setStakeModalIsOpen]);\n  const handleOnStake = useCallback(amount => {\n    onStake(amount);\n    handleDismissStakeModal();\n  }, [handleDismissStakeModal, onStake]);\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true);\n  }, [setStakeModalIsOpen]);\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Stake\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (!isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: isApproving,\n        full: true,\n        onClick: onApprove,\n        text: !isApproving ? 'Approve staking' : 'Approving staking...',\n        variant: isApproving || status !== 'connected' ? 'secondary' : 'default'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        full: true,\n        onClick: handleStakeClick,\n        text: \"Stake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 14\n      }, this);\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove]);\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0);\n\n    if (status !== 'connected' || !hasStaked) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Unstake & Claim\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Button, {\n      full: true,\n      onClick: onUnstakeAndHarvest,\n      text: \"Unstake & Claim\",\n      variant: \"secondary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this);\n  }, [stakedBalance, status, onUnstakeAndHarvest]);\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return numeral(stakedBalance).format('0.00000a');\n    } else {\n      return '--';\n    }\n  }, [stakedBalance]);\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedIndexBalance) {\n      return numeral(unharvestedIndexBalance.toString()).format('0.00000a');\n    } else {\n      return '--';\n    }\n  }, [unharvestedIndexBalance]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        \"data-cy\": \"expired-farm-widget\",\n        children: [/*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(StyledCardTitleWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(StyledHeaderIcon, {\n              alt: \"expiring icon\",\n              src: \"https://index-dao.s3.amazonaws.com/down-arrow.svg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n              size: \"md\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(StyledLmTitle, {\n              children: [/*#__PURE__*/_jsxDEV(StyledCardTitle, {\n                children: \"Expired Liquidity Program\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 113,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n                size: \"sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(StyledCardSubtitle, {\n                children: \"Active Oct. 7th, 2020 - Dec. 6th, 2020\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 115,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StyledFarmTokensAndApyWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Split, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedStakedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                    alt: \"eth dpi icon\",\n                    src: \"https://index-dao.s3.amazonaws.com/eth-dpi.svg\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Staked ETH/DPI Uniswap LP Tokens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: \"0.00% APR\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 138,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"(Volatile)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 139,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedEarnedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                    src: indexToken,\n                    alt: \"Index token\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Unclaimed INDEX in pool\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardActions, {\n          children: UnstakeButton\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(DpiStakeModal, {\n      isOpen: stakeModalIsOpen,\n      onDismiss: handleDismissStakeModal,\n      onStake: handleOnStake\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Stake, \"V17w1ZHBaL4sKDP8ZmkzOBF12/I=\", false, function () {\n  return [useBalances, useWallet, useFarming, usePrices];\n});\n\n_c = Stake;\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`;\n_c2 = StyledHeaderIcon;\nconst StyledTokenIcon = styled.img`\n  height: 20px;\n  margin-left: 10px;\n`;\n_c3 = StyledTokenIcon;\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`;\n_c4 = StyledCardTitle;\nconst StyledCardSubtitle = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`;\n_c5 = StyledCardSubtitle;\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c6 = StyledCardTitleWrapper;\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c7 = StyledLmTitle;\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n_c8 = StyledFarmTokensAndApyWrapper;\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c9 = StyledFarmText;\nconst StyledSectionLabel = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-size: 16px;\n`;\n_c10 = StyledSectionLabel;\nexport default Stake;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10;\n\n$RefreshReg$(_c, \"Stake\");\n$RefreshReg$(_c2, \"StyledHeaderIcon\");\n$RefreshReg$(_c3, \"StyledTokenIcon\");\n$RefreshReg$(_c4, \"StyledCardTitle\");\n$RefreshReg$(_c5, \"StyledCardSubtitle\");\n$RefreshReg$(_c6, \"StyledCardTitleWrapper\");\n$RefreshReg$(_c7, \"StyledLmTitle\");\n$RefreshReg$(_c8, \"StyledFarmTokensAndApyWrapper\");\n$RefreshReg$(_c9, \"StyledFarmText\");\n$RefreshReg$(_c10, \"StyledSectionLabel\");","map":{"version":3,"sources":["/Users/safahi/Desktop/index-ui-master/src/views/Farm/components/Stake/LegacyFarm.tsx"],"names":["React","useCallback","useMemo","useState","Button","Card","CardActions","CardContent","Spacer","numeral","styled","indexToken","Split","useBalances","useFarming","usePrices","useWallet","fromWei","DpiStakeModal","Stake","stakeModalIsOpen","setStakeModalIsOpen","stakedUniswapEthDpiLpBalance","stakedBalance","unharvestedIndexBalance","status","isApproved","isApproving","onApprove","onStake","onUnstakeAndHarvest","apy","handleDismissStakeModal","handleOnStake","amount","handleStakeClick","StakeButton","UnstakeButton","hasStaked","gt","formattedStakedBalance","format","formattedEarnedBalance","toString","StyledHeaderIcon","img","StyledTokenIcon","StyledCardTitle","span","StyledCardSubtitle","props","theme","colors","grey","StyledCardTitleWrapper","div","StyledLmTitle","StyledFarmTokensAndApyWrapper","StyledFarmText","StyledSectionLabel"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react'\n\nimport { Button, Card, CardActions, CardContent, Spacer } from 'react-neu'\n\nimport numeral from 'numeral'\nimport styled from 'styled-components'\n\nimport indexToken from 'assets/index-token.png'\nimport Split from 'components/Split'\nimport useBalances from 'hooks/useBalances'\nimport useFarming from 'hooks/useFarming'\nimport usePrices from 'hooks/usePrices'\nimport useWallet from 'hooks/useWallet'\nimport { fromWei } from 'utils'\n\nimport DpiStakeModal from './components/DpiStakeModal'\n\nconst Stake: React.FC = () => {\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false)\n\n  const {\n    stakedUniswapEthDpiLpBalance: stakedBalance,\n    unharvestedIndexBalance,\n  } = useBalances()\n  const { status } = useWallet()\n  const { isApproved, isApproving, onApprove, onStake, onUnstakeAndHarvest } =\n    useFarming()\n  const { apy } = usePrices()\n\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false)\n  }, [setStakeModalIsOpen])\n\n  const handleOnStake = useCallback(\n    (amount: string) => {\n      onStake(amount)\n      handleDismissStakeModal()\n    },\n    [handleDismissStakeModal, onStake]\n  )\n\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true)\n  }, [setStakeModalIsOpen])\n\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return <Button disabled full text='Stake' variant='secondary' />\n    }\n\n    if (!isApproved) {\n      return (\n        <Button\n          disabled={isApproving}\n          full\n          onClick={onApprove}\n          text={!isApproving ? 'Approve staking' : 'Approving staking...'}\n          variant={\n            isApproving || status !== 'connected' ? 'secondary' : 'default'\n          }\n        />\n      )\n    }\n\n    if (isApproved) {\n      return <Button full onClick={handleStakeClick} text='Stake' />\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove])\n\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0)\n    if (status !== 'connected' || !hasStaked) {\n      return <Button disabled full text='Unstake & Claim' variant='secondary' />\n    }\n    return (\n      <Button\n        full\n        onClick={onUnstakeAndHarvest}\n        text='Unstake & Claim'\n        variant='secondary'\n      />\n    )\n  }, [stakedBalance, status, onUnstakeAndHarvest])\n\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return numeral(stakedBalance).format('0.00000a')\n    } else {\n      return '--'\n    }\n  }, [stakedBalance])\n\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedIndexBalance) {\n      return numeral(unharvestedIndexBalance.toString()).format('0.00000a')\n    } else {\n      return '--'\n    }\n  }, [unharvestedIndexBalance])\n\n  return (\n    <>\n      <Card>\n        <div data-cy='expired-farm-widget'>\n          <CardContent>\n            <StyledCardTitleWrapper>\n              <StyledHeaderIcon\n                alt='expiring icon'\n                src='https://index-dao.s3.amazonaws.com/down-arrow.svg'\n              />\n              <Spacer size='md' />\n              <StyledLmTitle>\n                <StyledCardTitle>Expired Liquidity Program</StyledCardTitle>\n                <Spacer size='sm' />\n                <StyledCardSubtitle>\n                  Active Oct. 7th, 2020 - Dec. 6th, 2020\n                </StyledCardSubtitle>\n              </StyledLmTitle>\n            </StyledCardTitleWrapper>\n            <Spacer />\n\n            <StyledFarmTokensAndApyWrapper>\n              <Split>\n                <div>\n                  <StyledFarmText>\n                    {formattedStakedBalance}\n                    <StyledTokenIcon\n                      alt='eth dpi icon'\n                      src='https://index-dao.s3.amazonaws.com/eth-dpi.svg'\n                    />\n                  </StyledFarmText>\n                  <StyledSectionLabel>\n                    Staked ETH/DPI Uniswap LP Tokens\n                  </StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>0.00% APR</StyledFarmText>\n                  <StyledSectionLabel>(Volatile)</StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>\n                    {formattedEarnedBalance}\n                    <StyledTokenIcon src={indexToken} alt='Index token' />\n                  </StyledFarmText>\n                  <StyledSectionLabel>\n                    Unclaimed INDEX in pool\n                  </StyledSectionLabel>\n                </div>\n              </Split>\n            </StyledFarmTokensAndApyWrapper>\n          </CardContent>\n          <CardActions>{UnstakeButton}</CardActions>\n        </div>\n      </Card>\n      <DpiStakeModal\n        isOpen={stakeModalIsOpen}\n        onDismiss={handleDismissStakeModal}\n        onStake={handleOnStake}\n      />\n    </>\n  )\n}\n\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`\n\nconst StyledTokenIcon = styled.img`\n  height: 20px;\n  margin-left: 10px;\n`\n\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`\n\nconst StyledCardSubtitle = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`\n\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledSectionLabel = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-size: 16px;\n`\n\nexport default Stake\n"]},"metadata":{},"sourceType":"module"}