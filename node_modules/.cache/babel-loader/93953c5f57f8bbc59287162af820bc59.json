{"ast":null,"code":"var _jsxFileName = \"/Users/safahi/Documents/GitHub/appwebsite/src/views/Farm/components/Stake/MviFarm.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useMemo, useState } from 'react';\nimport { Button, Card, CardContent, Spacer } from 'react-neu';\nimport numeral from 'numeral';\nimport styled from 'styled-components';\nimport indexToken from 'assets/index-token.png';\nimport Split from 'components/Split';\nimport useBalances from 'hooks/useBalances';\nimport useMediaQuery from 'hooks/useMediaQuery';\nimport useMviStakingRewards from 'hooks/useMviStakingRewards';\nimport usePrices from 'hooks/usePrices';\nimport useWallet from 'hooks/useWallet';\nimport { fromWei } from 'utils';\nimport MviStakeModal from './components/MviStakeModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Stake = () => {\n  _s();\n\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false);\n  const {\n    stakedUniswapEthMviLpBalance: stakedBalance,\n    unharvestedMviRewardsBalance\n  } = useBalances();\n  const {\n    status\n  } = useWallet();\n  const {\n    isApproved,\n    isApproving,\n    onApprove,\n    onStake,\n    onUnstakeAndHarvest,\n    onHarvest\n  } = useMviStakingRewards();\n  const {\n    mviRewardsApy\n  } = usePrices();\n  const {\n    isMobile\n  } = useMediaQuery();\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false);\n  }, [setStakeModalIsOpen]);\n  const handleOnStake = useCallback(amount => {\n    onStake(amount);\n    handleDismissStakeModal();\n  }, [handleDismissStakeModal, onStake]);\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true);\n  }, [setStakeModalIsOpen]);\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Stake\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 14\n      }, this);\n    }\n\n    if (!isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: isApproving,\n        full: true,\n        onClick: onApprove,\n        text: !isApproving ? 'Approve staking' : 'Approving staking...',\n        variant: isApproving || status !== 'connected' ? 'secondary' : 'default'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this);\n    }\n\n    if (isApproved) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        full: true,\n        onClick: handleStakeClick,\n        text: \"Stake\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 14\n      }, this);\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove]);\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0);\n\n    if (status !== 'connected' || !hasStaked) {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Unstake & Claim\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Button, {\n      full: true,\n      onClick: onUnstakeAndHarvest,\n      text: \"Unstake & Claim\",\n      variant: \"secondary\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this);\n  }, [stakedBalance, status, onUnstakeAndHarvest]);\n  const ClaimButton = useMemo(() => {\n    if (status !== 'connected') {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        disabled: true,\n        full: true,\n        text: \"Claim\",\n        variant: \"secondary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 14\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Button, {\n      full: true,\n      onClick: onHarvest,\n      text: \"Claim\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 12\n    }, this);\n  }, [status, onHarvest]);\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return numeral(fromWei(stakedBalance)).format('0.00000a');\n    } else {\n      return '--';\n    }\n  }, [stakedBalance]);\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedMviRewardsBalance) {\n      return numeral(fromWei(unharvestedMviRewardsBalance)).format('0.00000a');\n    } else {\n      return '--';\n    }\n  }, [unharvestedMviRewardsBalance]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Card, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        \"data-cy\": \"mvi-farm-widget\",\n        children: [/*#__PURE__*/_jsxDEV(CardContent, {\n          children: [/*#__PURE__*/_jsxDEV(StyledCardTitleWrapper, {\n            children: [/*#__PURE__*/_jsxDEV(StyledHeaderIcon, {\n              alt: \"MVI Icon\",\n              src: \"https://set-core.s3.amazonaws.com/img/portfolios/mvi.svg\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n              size: \"md\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(StyledLmTitle, {\n              children: [/*#__PURE__*/_jsxDEV(StyledCardTitle, {\n                children: \"MVI Liquidity Program\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Spacer, {\n                size: \"sm\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(StyledCardSubtitle, {\n                children: \"Active August 20th, 2021 - September 19th, 2021\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(StyledFarmTokensAndApyWrapper, {\n            children: /*#__PURE__*/_jsxDEV(Split, {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedStakedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIconWrapper, {\n                    children: [/*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                      alt: \"ETH Icon\",\n                      src: \"https://s3.amazonaws.com/set-core/img/coin-icons/eth.svg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 143,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                      alt: \"MVI Icon\",\n                      src: \"https://set-core.s3.amazonaws.com/img/portfolios/mvi.svg\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Staked ETH/MVI Uniswap LP Tokens\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 153,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [mviRewardsApy, \"% APR\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"(Volatile)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(StyledFarmText, {\n                  children: [formattedEarnedBalance, /*#__PURE__*/_jsxDEV(StyledTokenIconWrapper, {\n                    children: /*#__PURE__*/_jsxDEV(StyledTokenIcon, {\n                      src: indexToken,\n                      alt: \"Index token\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 167,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(StyledSectionLabel, {\n                  children: \"Unclaimed INDEX in pool\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 170,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StyledCardActions, {\n          isMobile: isMobile,\n          children: [ClaimButton, /*#__PURE__*/_jsxDEV(Spacer, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), UnstakeButton]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(MviStakeModal, {\n      isOpen: stakeModalIsOpen,\n      onDismiss: handleDismissStakeModal,\n      onStake: handleOnStake\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Stake, \"ruAHm6SRIOQDklyIZpWTo70GXgg=\", false, function () {\n  return [useBalances, useWallet, useMviStakingRewards, usePrices, useMediaQuery];\n});\n\n_c = Stake;\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`;\n_c2 = StyledHeaderIcon;\nconst StyledTokenIconWrapper = styled.div`\n  margin-left: 10px;\n`;\n_c3 = StyledTokenIconWrapper;\nconst StyledTokenIcon = styled.img`\n  height: 18px;\n  margin-right: 4px;\n`;\n_c4 = StyledTokenIcon;\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`;\n_c5 = StyledCardTitle;\nconst StyledCardSubtitle = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`;\n_c6 = StyledCardSubtitle;\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c7 = StyledCardTitleWrapper;\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c8 = StyledLmTitle;\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`;\n_c9 = StyledFarmTokensAndApyWrapper;\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`;\n_c10 = StyledFarmText;\nconst StyledSectionLabel = styled.span`\n  color: ${props => props.theme.colors.grey[500]};\n  font-size: 16px;\n`;\n_c11 = StyledSectionLabel;\nconst StyledCardActions = styled.div`\n  display: flex;\n  flex-wrap: ${props => props.isMobile ? 'wrap' : 'no-wrap'};\n  padding: 30px;\n  padding-top: 0px;\n`;\n_c12 = StyledCardActions;\nexport default Stake;\n\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c10, _c11, _c12;\n\n$RefreshReg$(_c, \"Stake\");\n$RefreshReg$(_c2, \"StyledHeaderIcon\");\n$RefreshReg$(_c3, \"StyledTokenIconWrapper\");\n$RefreshReg$(_c4, \"StyledTokenIcon\");\n$RefreshReg$(_c5, \"StyledCardTitle\");\n$RefreshReg$(_c6, \"StyledCardSubtitle\");\n$RefreshReg$(_c7, \"StyledCardTitleWrapper\");\n$RefreshReg$(_c8, \"StyledLmTitle\");\n$RefreshReg$(_c9, \"StyledFarmTokensAndApyWrapper\");\n$RefreshReg$(_c10, \"StyledFarmText\");\n$RefreshReg$(_c11, \"StyledSectionLabel\");\n$RefreshReg$(_c12, \"StyledCardActions\");","map":{"version":3,"sources":["/Users/safahi/Documents/GitHub/appwebsite/src/views/Farm/components/Stake/MviFarm.tsx"],"names":["React","useCallback","useMemo","useState","Button","Card","CardContent","Spacer","numeral","styled","indexToken","Split","useBalances","useMediaQuery","useMviStakingRewards","usePrices","useWallet","fromWei","MviStakeModal","Stake","stakeModalIsOpen","setStakeModalIsOpen","stakedUniswapEthMviLpBalance","stakedBalance","unharvestedMviRewardsBalance","status","isApproved","isApproving","onApprove","onStake","onUnstakeAndHarvest","onHarvest","mviRewardsApy","isMobile","handleDismissStakeModal","handleOnStake","amount","handleStakeClick","StakeButton","UnstakeButton","hasStaked","gt","ClaimButton","formattedStakedBalance","format","formattedEarnedBalance","StyledHeaderIcon","img","StyledTokenIconWrapper","div","StyledTokenIcon","StyledCardTitle","span","StyledCardSubtitle","props","theme","colors","grey","StyledCardTitleWrapper","StyledLmTitle","StyledFarmTokensAndApyWrapper","StyledFarmText","StyledSectionLabel","StyledCardActions"],"mappings":"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","sourcesContent":["import React, { useCallback, useMemo, useState } from 'react'\n\nimport { Button, Card, CardContent, Spacer } from 'react-neu'\n\nimport numeral from 'numeral'\nimport styled from 'styled-components'\n\nimport indexToken from 'assets/index-token.png'\nimport Split from 'components/Split'\nimport useBalances from 'hooks/useBalances'\nimport useMediaQuery from 'hooks/useMediaQuery'\nimport useMviStakingRewards from 'hooks/useMviStakingRewards'\nimport usePrices from 'hooks/usePrices'\nimport useWallet from 'hooks/useWallet'\nimport { fromWei } from 'utils'\n\nimport MviStakeModal from './components/MviStakeModal'\n\nconst Stake: React.FC = () => {\n  const [stakeModalIsOpen, setStakeModalIsOpen] = useState(false)\n\n  const {\n    stakedUniswapEthMviLpBalance: stakedBalance,\n    unharvestedMviRewardsBalance,\n  } = useBalances()\n  const { status } = useWallet()\n  const {\n    isApproved,\n    isApproving,\n    onApprove,\n    onStake,\n    onUnstakeAndHarvest,\n    onHarvest,\n  } = useMviStakingRewards()\n  const { mviRewardsApy } = usePrices()\n  const { isMobile } = useMediaQuery()\n\n  const handleDismissStakeModal = useCallback(() => {\n    setStakeModalIsOpen(false)\n  }, [setStakeModalIsOpen])\n\n  const handleOnStake = useCallback(\n    (amount: string) => {\n      onStake(amount)\n      handleDismissStakeModal()\n    },\n    [handleDismissStakeModal, onStake]\n  )\n\n  const handleStakeClick = useCallback(() => {\n    setStakeModalIsOpen(true)\n  }, [setStakeModalIsOpen])\n\n  const StakeButton = useMemo(() => {\n    if (status !== 'connected') {\n      return <Button disabled full text='Stake' variant='secondary' />\n    }\n    if (!isApproved) {\n      return (\n        <Button\n          disabled={isApproving}\n          full\n          onClick={onApprove}\n          text={!isApproving ? 'Approve staking' : 'Approving staking...'}\n          variant={\n            isApproving || status !== 'connected' ? 'secondary' : 'default'\n          }\n        />\n      )\n    }\n\n    if (isApproved) {\n      return <Button full onClick={handleStakeClick} text='Stake' />\n    }\n  }, [isApproved, isApproving, status, handleStakeClick, onApprove])\n\n  const UnstakeButton = useMemo(() => {\n    const hasStaked = stakedBalance && fromWei(stakedBalance).gt(0)\n    if (status !== 'connected' || !hasStaked) {\n      return <Button disabled full text='Unstake & Claim' variant='secondary' />\n    }\n\n    return (\n      <Button\n        full\n        onClick={onUnstakeAndHarvest}\n        text='Unstake & Claim'\n        variant='secondary'\n      />\n    )\n  }, [stakedBalance, status, onUnstakeAndHarvest])\n\n  const ClaimButton = useMemo(() => {\n    if (status !== 'connected') {\n      return <Button disabled full text='Claim' variant='secondary' />\n    }\n    return <Button full onClick={onHarvest} text='Claim' />\n  }, [status, onHarvest])\n\n  const formattedStakedBalance = useMemo(() => {\n    if (stakedBalance) {\n      return numeral(fromWei(stakedBalance)).format('0.00000a')\n    } else {\n      return '--'\n    }\n  }, [stakedBalance])\n\n  const formattedEarnedBalance = useMemo(() => {\n    if (unharvestedMviRewardsBalance) {\n      return numeral(fromWei(unharvestedMviRewardsBalance)).format('0.00000a')\n    } else {\n      return '--'\n    }\n  }, [unharvestedMviRewardsBalance])\n\n  return (\n    <>\n      <Card>\n        <div data-cy='mvi-farm-widget'>\n          <CardContent>\n            <StyledCardTitleWrapper>\n              <StyledHeaderIcon\n                alt='MVI Icon'\n                src='https://set-core.s3.amazonaws.com/img/portfolios/mvi.svg'\n              />\n              <Spacer size='md' />\n              <StyledLmTitle>\n                <StyledCardTitle>MVI Liquidity Program</StyledCardTitle>\n                <Spacer size='sm' />\n                <StyledCardSubtitle>\n                  Active August 20th, 2021 - September 19th, 2021\n                </StyledCardSubtitle>\n              </StyledLmTitle>\n            </StyledCardTitleWrapper>\n            <Spacer />\n\n            <StyledFarmTokensAndApyWrapper>\n              <Split>\n                <div>\n                  <StyledFarmText>\n                    {formattedStakedBalance}\n                    <StyledTokenIconWrapper>\n                      <StyledTokenIcon\n                        alt='ETH Icon'\n                        src='https://s3.amazonaws.com/set-core/img/coin-icons/eth.svg'\n                      />\n                      <StyledTokenIcon\n                        alt='MVI Icon'\n                        src='https://set-core.s3.amazonaws.com/img/portfolios/mvi.svg'\n                      />\n                    </StyledTokenIconWrapper>\n                  </StyledFarmText>\n                  <StyledSectionLabel>\n                    Staked ETH/MVI Uniswap LP Tokens\n                  </StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>{mviRewardsApy}% APR</StyledFarmText>\n                  <StyledSectionLabel>(Volatile)</StyledSectionLabel>\n                </div>\n\n                <div>\n                  <StyledFarmText>\n                    {formattedEarnedBalance}\n                    <StyledTokenIconWrapper>\n                      <StyledTokenIcon src={indexToken} alt='Index token' />\n                    </StyledTokenIconWrapper>\n                  </StyledFarmText>\n                  <StyledSectionLabel>\n                    Unclaimed INDEX in pool\n                  </StyledSectionLabel>\n                </div>\n              </Split>\n            </StyledFarmTokensAndApyWrapper>\n          </CardContent>\n          <StyledCardActions isMobile={isMobile}>\n            {ClaimButton}\n            <Spacer />\n            {UnstakeButton}\n          </StyledCardActions>\n        </div>\n      </Card>\n      <MviStakeModal\n        isOpen={stakeModalIsOpen}\n        onDismiss={handleDismissStakeModal}\n        onStake={handleOnStake}\n      />\n    </>\n  )\n}\n\nconst StyledHeaderIcon = styled.img`\n  height: 58px;\n  width: 58px;\n  margin-bottom: 10px;\n`\n\nconst StyledTokenIconWrapper = styled.div`\n  margin-left: 10px;\n`\n\nconst StyledTokenIcon = styled.img`\n  height: 18px;\n  margin-right: 4px;\n`\n\nconst StyledCardTitle = styled.span`\n  font-weight: 600;\n  font-size: 28px;\n`\n\nconst StyledCardSubtitle = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-weight: 600;\n  font-size: 18px;\n`\n\nconst StyledCardTitleWrapper = styled.div`\n  display: flex;\n  align-items: center;\n  flex-wrap: wrap;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledLmTitle = styled.div`\n  display: flex;\n  flex-direction: column;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledFarmTokensAndApyWrapper = styled.div`\n  display: flex;\n  flex-wrap: wrap;\n`\n\nconst StyledFarmText = styled.span`\n  display: flex;\n  align-items: center;\n  font-weight: 600;\n  font-size: 24px;\n`\n\nconst StyledSectionLabel = styled.span`\n  color: ${(props) => props.theme.colors.grey[500]};\n  font-size: 16px;\n`\n\ninterface StyledCardActionProps {\n  isMobile: boolean\n}\n\nconst StyledCardActions = styled.div<StyledCardActionProps>`\n  display: flex;\n  flex-wrap: ${(props) => (props.isMobile ? 'wrap' : 'no-wrap')};\n  padding: 30px;\n  padding-top: 0px;\n`\n\nexport default Stake\n"]},"metadata":{},"sourceType":"module"}