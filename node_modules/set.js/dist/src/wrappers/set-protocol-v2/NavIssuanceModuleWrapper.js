'use strict';var __awaiter=this&&this.__awaiter||function(thisArg,_arguments,P,generator){function adopt(value){return value instanceof P?value:new P(function(resolve){resolve(value);});}return new(P||(P=Promise))(function(resolve,reject){function fulfilled(value){try{step(generator.next(value));}catch(e){reject(e);}}function rejected(value){try{step(generator['throw'](value));}catch(e){reject(e);}}function step(result){result.done?resolve(result.value):adopt(result.value).then(fulfilled,rejected);}step((generator=generator.apply(thisArg,_arguments||[])).next());});};var __generator=this&&this.__generator||function(thisArg,body){var _={label:0,sent:function(){if(t[0]&1)throw t[1];return t[1];},trys:[],ops:[]},f,y,t,g;return g={next:verb(0),'throw':verb(1),'return':verb(2)},typeof Symbol==='function'&&(g[Symbol.iterator]=function(){return this;}),g;function verb(n){return function(v){return step([n,v]);};}function step(op){if(f)throw new TypeError('Generator is already executing.');while(_)try{if(f=1,y&&(t=op[0]&2?y['return']:op[0]?y['throw']||((t=y['return'])&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;if(y=0,t)op=[op[0]&2,t.value];switch(op[0]){case 0:case 1:t=op;break;case 4:_.label++;return{value:op[1],done:false};case 5:_.label++;y=op[1];op=[0];continue;case 7:op=_.ops.pop();_.trys.pop();continue;default:if(!(t=_.trys,t=t.length>0&&t[t.length-1])&&(op[0]===6||op[0]===2)){_=0;continue;}if(op[0]===3&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break;}if(op[0]===6&&_.label<t[1]){_.label=t[1];t=op;break;}if(t&&_.label<t[2]){_.label=t[2];_.ops.push(op);break;}if(t[2])_.ops.pop();_.trys.pop();continue;}op=body.call(thisArg,_);}catch(e){op=[6,e];y=0;}finally{f=t=0;}if(op[0]&5)throw op[1];return{value:op[0]?op[1]:void 0,done:true};}};var __importDefault=this&&this.__importDefault||function(mod){return mod&&mod.__esModule?mod:{'default':mod};};Object.defineProperty(exports,'__esModule',{value:true});var transactions_1=require('../../utils/transactions');var ContractWrapper_1=__importDefault(require('./ContractWrapper'));var NavIssuanceModuleWrapper=function(){function NavIssuanceModuleWrapper(provider,navIssuanceModuleAddress){this.provider=provider;this.contracts=new ContractWrapper_1.default(this.provider);this.navIssuanceModuleAddress=navIssuanceModuleAddress;}NavIssuanceModuleWrapper.prototype.initialize=function(setTokenAddress,navIssuanceSettings,callerAddress,txOpts){if(callerAddress===void 0){callerAddress=undefined;}if(txOpts===void 0){txOpts={};}return __awaiter(this,void 0,void 0,function(){var txOptions,navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,(0,transactions_1.generateTxOpts)(txOpts)];case 1:txOptions=_a.sent();return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress,callerAddress)];case 2:navIssuanceModuleInstance=_a.sent();return[4,navIssuanceModuleInstance.initialize(setTokenAddress,navIssuanceSettings,txOptions)];case 3:return[2,_a.sent()];}});});};NavIssuanceModuleWrapper.prototype.issue=function(setTokenAddress,reserveAsset,reserveAssetQuantity,minSetTokenReceiveQuantity,to,callerAddress,txOpts){if(callerAddress===void 0){callerAddress=undefined;}if(txOpts===void 0){txOpts={};}return __awaiter(this,void 0,void 0,function(){var txOptions,navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,(0,transactions_1.generateTxOpts)(txOpts)];case 1:txOptions=_a.sent();return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress,callerAddress)];case 2:navIssuanceModuleInstance=_a.sent();return[4,navIssuanceModuleInstance.issue(setTokenAddress,reserveAsset,reserveAssetQuantity,minSetTokenReceiveQuantity,to,txOptions)];case 3:return[2,_a.sent()];}});});};NavIssuanceModuleWrapper.prototype.issueWithEther=function(setTokenAddress,minSetTokenReceiveQuantity,to,callerAddress,txOpts){if(callerAddress===void 0){callerAddress=undefined;}if(txOpts===void 0){txOpts={};}return __awaiter(this,void 0,void 0,function(){var txOptions,navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,(0,transactions_1.generateTxOpts)(txOpts)];case 1:txOptions=_a.sent();return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress,callerAddress)];case 2:navIssuanceModuleInstance=_a.sent();return[4,navIssuanceModuleInstance.issueWithEther(setTokenAddress,minSetTokenReceiveQuantity,to,txOptions)];case 3:return[2,_a.sent()];}});});};NavIssuanceModuleWrapper.prototype.redeem=function(setTokenAddress,reserveAsset,setTokenQuantity,minReserveReceiveQuantity,to,callerAddress,txOpts){if(callerAddress===void 0){callerAddress=undefined;}if(txOpts===void 0){txOpts={};}return __awaiter(this,void 0,void 0,function(){var txOptions,navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,(0,transactions_1.generateTxOpts)(txOpts)];case 1:txOptions=_a.sent();return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress,callerAddress)];case 2:navIssuanceModuleInstance=_a.sent();return[4,navIssuanceModuleInstance.redeem(setTokenAddress,reserveAsset,setTokenQuantity,minReserveReceiveQuantity,to,txOptions)];case 3:return[2,_a.sent()];}});});};NavIssuanceModuleWrapper.prototype.redeemIntoEther=function(setTokenAddress,setTokenQuantity,minReserveReceiveQuantity,to,callerAddress,txOpts){if(callerAddress===void 0){callerAddress=undefined;}if(txOpts===void 0){txOpts={};}return __awaiter(this,void 0,void 0,function(){var txOptions,navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,(0,transactions_1.generateTxOpts)(txOpts)];case 1:txOptions=_a.sent();return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress,callerAddress)];case 2:navIssuanceModuleInstance=_a.sent();return[4,navIssuanceModuleInstance.redeemIntoEther(setTokenAddress,setTokenQuantity,minReserveReceiveQuantity,to,txOptions)];case 3:return[2,_a.sent()];}});});};NavIssuanceModuleWrapper.prototype.getReserveAssets=function(setTokenAddress){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.getReserveAssets(setTokenAddress)];}});});};NavIssuanceModuleWrapper.prototype.isReserveAsset=function(setTokenAddress,reserveAsset){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.isReserveAsset(setTokenAddress,reserveAsset)];}});});};NavIssuanceModuleWrapper.prototype.getIssuePremium=function(setTokenAddress,reserveAsset,reserveAssetQuantity){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.getIssuePremium(setTokenAddress,reserveAsset,reserveAssetQuantity)];}});});};NavIssuanceModuleWrapper.prototype.getRedeemPremium=function(setTokenAddress,reserveAsset,setTokenQuantity){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.getRedeemPremium(setTokenAddress,reserveAsset,setTokenQuantity)];}});});};NavIssuanceModuleWrapper.prototype.getManagerFee=function(setTokenAddress,managerFeeIndex){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.getManagerFee(setTokenAddress,managerFeeIndex)];}});});};NavIssuanceModuleWrapper.prototype.getExpectedSetTokenIssueQuantity=function(setTokenAddress,reserveAsset,reserveAssetQuantity){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.getExpectedSetTokenIssueQuantity(setTokenAddress,reserveAsset,reserveAssetQuantity)];}});});};NavIssuanceModuleWrapper.prototype.getExpectedReserveRedeemQuantity=function(setTokenAddress,reserveAsset,setTokenQuantity){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.getExpectedReserveRedeemQuantity(setTokenAddress,reserveAsset,setTokenQuantity)];}});});};NavIssuanceModuleWrapper.prototype.isIssueValid=function(setTokenAddress,reserveAsset,reserveAssetQuantity){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.isIssueValid(setTokenAddress,reserveAsset,reserveAssetQuantity)];}});});};NavIssuanceModuleWrapper.prototype.isRedeemValid=function(setTokenAddress,reserveAsset,setTokenQuantity){return __awaiter(this,void 0,void 0,function(){var navIssuanceModuleInstance;return __generator(this,function(_a){switch(_a.label){case 0:return[4,this.contracts.loadNavIssuanceModuleAsync(this.navIssuanceModuleAddress)];case 1:navIssuanceModuleInstance=_a.sent();return[2,navIssuanceModuleInstance.isRedeemValid(setTokenAddress,reserveAsset,setTokenQuantity)];}});});};return NavIssuanceModuleWrapper;}();exports.default=NavIssuanceModuleWrapper;